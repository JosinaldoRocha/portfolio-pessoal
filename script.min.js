document.addEventListener("DOMContentLoaded", function () {
  let e = document.querySelector(".mobile-menu-icon"),
    t = document.querySelector(".menu");
  e.addEventListener("click", function () {
    t.classList.toggle("mobile-menu-open");
  });
});
const prevButton = document.querySelector(".prev-testimonial"),
  nextButton = document.querySelector(".next-testimonial"),
  cards = document.querySelectorAll(".container-testimonials > div");
let currentIndex = 0;
function showCards() {
  cards.forEach((e, t) => {
    t >= currentIndex && t < currentIndex + getVisibleCardCount()
      ? (e.style.display = "block")
      : (e.style.display = "none");
  });
  let e = 0 === currentIndex;
  e
    ? prevButton.classList.add("disabled")
    : prevButton.classList.remove("disabled");
  let t = currentIndex + getVisibleCardCount() >= cards.length;
  t
    ? nextButton.classList.add("disabled")
    : nextButton.classList.remove("disabled");
}
function getVisibleCardCount() {
  return window.innerWidth <= 1200 ? 1 : 3;
}
function prevCard() {
  currentIndex > 0 && (currentIndex -= 1), showCards();
}
function nextCard() {
  currentIndex + getVisibleCardCount() < cards.length && (currentIndex += 1),
    showCards();
}
prevButton.addEventListener("click", prevCard),
  nextButton.addEventListener("click", nextCard),
  showCards(),
  window.addEventListener("resize", showCards),
  document.addEventListener("DOMContentLoaded", function () {
    let e = document.querySelector("form"),
      t = document.getElementById("success-message"),
      n = document.getElementById("error-message"),
      s = document.getElementById("loading");
    e.addEventListener("submit", function (o) {
      o.preventDefault();
      let l = document.getElementById("nome").value,
        r = document.getElementById("email").value,
        d = document.getElementById("assunto").value,
        a = document.getElementById("mensagem").value;
      (e.style.display = "none"),
        (t.style.display = "none"),
        (n.style.display = "none"),
        (s.style.display = "block");
      let i = {
        to: "josinaldodev@hotmail.com",
        from: "josinaldorochaleal@hotmail.com",
        subject: "Contato do site",
        text: "Contato do site",
        html: `<p>Nome: ${l}</p><br/><p>Email: ${r}</p><br/><p>Assunto: ${d}</p><br/><p>Mensagem: ${a}</p>`,
      };
      fetch("https://api-mail-gun-h0if.onrender.com/send-email", {
        method: "POST",
        headers: { "Content-type": "application/json" },
        body: JSON.stringify(i),
      })
        .then((e) => {
          e.ok
            ? ((s.style.display = "none"), (t.style.display = "block"))
            : ((s.style.display = "none"),
              (n.style.display = "block"),
              console.error(
                `Erro na resposta da api: ${e.status} - ${e.statusText}`
              ));
        })
        .catch((e) => {
          console.error(e),
            (s.style.display = "none"),
            (n.style.display = "block");
        });
    });
  });
